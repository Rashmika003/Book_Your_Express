<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/62fff06bf6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://kit.fontawesome.com/62fff06bf6.css" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="bootstrap/bootstrap.css"> -->
    <link rel="stylesheet" href="CSS/bootstrap-additonal.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <title>Destinations</title>
</head>

<style>
  * {
     margin: 5px;              /* this needs to be changed when finalizing styles */
  }

  .content {
    display: flex;
  }

  .text {
    border: 1px red solid;
    width: 500px;
  }

  .wholeBus {
    border: 1px red solid;
    display: flex;
    height: auto;
    width: fit-content;
  }

  .sides {
    border: 1px red solid;
    height: auto;
    width: fit-content;
  }

  .seatRaw {
    /* border: 1px rgb(255, 0, 204) solid; */
    width: fit-content;
    display: flex;
  }

  .seat {
    /* border: 1px rgb(68, 255, 0) solid; */
    background-color: aqua;
    width: 100px;
    height: 100px;
  }
</style>


<body class="background">

  <script>
    function myFunction() {
      // Declare variables
      var input, filter, ul, li, a, i;
      input = document.getElementById("mySearch");
      filter = input.value.toUpperCase();
      ul = document.getElementById("myMenu");
      li = ul.getElementsByTagName("li");
    
      // Loop through all list items, and hide those who don't match the search query
      for (i = 0; i < li.length; i++) {
        a = li[i].getElementsByTagName("a")[0];
        if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
          li[i].style.display = "";
        } else {
          li[i].style.display = "none";
        }
      }
    }

    window.onload = function () {
        const seatDetails = [
          { seatNo: "s1", isClicked: false, status: "booked" },
          { seatNo: "s2", isClicked: false, status: "not-booked" },
          { seatNo: "s3", isClicked: false, status: "booked" },
          { seatNo: "s4", isClicked: false, status: "not-booked" },
          { seatNo: "s5", isClicked: false, status: "booked" },
          { seatNo: "s6", isClicked: false, status: "booked" },
          { seatNo: "s7", isClicked: false, status: "not-booked" },
          { seatNo: "s8", isClicked: false, status: "booked" },
          { seatNo: "s9", isClicked: false, status: "booked" },
          { seatNo: "s10", isClicked: false, status: "not-booked" },
          { seatNo: "s11", isClicked: false, status: "booked" },
          { seatNo: "s12", isClicked: false, status: "booked" },
          { seatNo: "s13", isClicked: false, status: "not-booked" },
          { seatNo: "s14", isClicked: false, status: "booked" },
          { seatNo: "s15", isClicked: false, status: "not-booked" },
          { seatNo: "s16", isClicked: false, status: "not-booked" },
        ];

        function initialColoringSeats() {
          // iterate through seatDeatails list and color seat elements accordingly
          for (let i = 0; i < seatDetails.length; i++) {
            let seat = seatDetails[i];
            //console.log(seat.seatNo);
            if (seat.status == "booked") {
              //color red -> booked seats
              let seatObj = document.getElementById(seat.seatNo);
              seatObj.style.backgroundColor = "red";
            }
          }
        }
        initialColoringSeats();

        //event-listners for all "seat" elements
        const allSeats = document.getElementsByClassName("seat");

        for (let i = 0; i < allSeats.length; i++) {
          allSeats[i].addEventListener("click", function () {
            seatManager(allSeats[i].id);
          });
        }

        function seatManager(seatId){
          //check status and change seatDeatais list accordingly
          for (let i = 0; i < seatDetails.length; i++) {
            let seat = seatDetails[i];
            if (seat.seatNo == seatId && !seat.isClicked && seat.status == "not-booked") {
              //not clicked, not-booked seats
              let seatObj = document.getElementById(seat.seatNo);
              seatObj.style.backgroundColor = "blue";
              seat.isClicked = true;
              seat.status = "booked";
              selectedSeatDataSaver(seatId); //pass seat ID to save
              return;
            }
            if(seat.seatNo == seatId && seat.status == "booked" && !seat.isClicked){
              //isClicked = false & booked <-- these are already booked red seats
              alert("Sorry! seat is booked");
              return;
            }
            if(seat.seatNo == seatId && seat.status == "booked" && seat.isClicked){
              // isclicked = ture & booked <-- these are user clicked elements
              //status change back to original status since user click them again
              let seatObj = document.getElementById(seat.seatNo);
              seatObj.style.backgroundColor = "aqua";
              seat.isClicked = false;
              seat.status = "not-booked";
              selectedSeatDataSaver(seatId); //pass seat ID to remove from saved data
              return;
            }
          }
        }

        selectedSeats = [];
        function selectedSeatDataSaver(seatId){
          if(!selectedSeats.includes(seatId)){
            console.log(seatId +" is recorded");
            selectedSeats.push(seatId);
            selectedSeatIndicator(selectedSeats);
            return;
          }
          if(selectedSeats.includes(seatId)){
            for(let i = 0; i < selectedSeats.length; i++){
              if(selectedSeats[i] == seatId){
                console.log(seatId+" is deleted");
                selectedSeats.splice(i, 1);
                selectedSeatIndicator(selectedSeats);
                return;
              }
            }
          }
        }

        function selectedSeatIndicator(selectedSeats){
          selectedSeats.sort((a, b) => a.localeCompare(b, undefined, { numeric: true })); // magic sort()
          seatNames = "Selected Seats : "
          for(let i = 0; i < selectedSeats.length; i++){
            seatNames += " "+ selectedSeats[i];
          }
          console.log("selected all seats >> "+seatNames);

          let selectedObj = document.getElementById("selectedSeats");
          selectedObj.innerHTML = seatNames;
          let selectedObj2 = document.getElementById("numberOfSeats");
          selectedObj2.innerHTML = "Number of Seats :" + selectedSeats.length;
          let selectedObj3 = document.getElementById("totalCost");
          selectedObj3.innerHTML = "Total cost : " + selectedSeats.length * 100;  // ticket price is 100$

        }

      };
    </script>

   <!-- <script src="bootstrap/bootstrap.js"></script>  -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="fa-solid fa-paper-plane"></i>
            COMPANY NAME</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="index.html"> <!-- ****icon link goes here**** </i>-->Home</a> 
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="login.html"><!-- ****icon link goes here****</i>-->Login</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link " href="destinations.html"><!-- ****icon link goes here****</i>-->Destinations</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="ticketing.html"><!-- ****icon link goes here****</i>-->Tickets</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link last-child" href="contactUs.html" ><!-- ****icon link goes here****</i>-->Contact Us</a>
                  </li>
                </ul> 
              </div>
        </div>
    </nav>

    <div class="search header">
      <h2>
        text goes here
      </h2>
    </div>
    
    
    <section class="search-bar pt-5">
      <div class="container search">
        <div class="row ">
          <div class="col text-center ">
            <input type="text" id="mySearch" onkeyup="myFunction()" placeholder="Search Start" title="Type in a category">
    
            <ul id="myMenu">
              <li><a href="#">startingz_1</a></li>
              <li><a href="#">startingx_2</a></li>
              <li><a href="#">startingy_3</a></li>
              <li><a href="#">starting_4</a></li>
              <li><a href="#">starting_5</a></li>
              <li><a href="#">starting_6</a></li>
            </ul>
          </div>
        
    
          <div class="col  text-center ">
            <input type="text" id="mySearch" onkeyup="myFunction()" placeholder="Search Destinations" title="Type in a category">
    
            <ul id="myMenu">
              <li><a href="#">destination_1</a></li>
              <li><a href="#">destination_2</a></li>
              <li><a href="#">destination_3</a></li>
              <li><a href="#">destination_4</a></li>
              <li><a href="#">destination_5</a></li>
              <li><a href="#">destination_6</a></li>
            </ul>
          </div>
        </div>
      </div>
    </section>
    
    

    <section  class="mt-5 pb-5">
      <div class="container ">
        <div class="row card-row">
          <div class="col-sm-4">
            <div class="card text-center pt-3" >
              <div class="card-img">
                <img src="resources/bg.png" class="card-img-top img-fluid my-3" alt="..." >
              </div>
              <div class="card-body">
                <h5 class="card-title">lorem ipsum</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, 
                    consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua.</p>
                <a href="#" class="btn btn-primary">Learn More</a>
              </div>
            </div>
          </div>
      
          <div class="col-sm-4 ">
            <div class="card text-center pt-3">
              <div class="card-img">
                <img src="resources/bg.png" class="card-img-top img-fluid my-3" alt="..." >
              </div>
              <div class="card-body">
                <h5 class="card-title">lorem ipsum</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, 
                    consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua.</p>
                <a href="#" class="btn btn-primary">Learn More</a>
              </div>
            </div>
          </div>
      
          <div class="col-sm-4">
            <div class="card text-center pt-3">
              <div class="card-img">
                <img src="resources/bg.png" class="card-img-top img-fluid my-3" alt="..." >
              </div>
              <div class="card-body">
                <h5 class="card-title">lorem ipsum</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, 
                    consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua.</p>
                <a href="#" class="btn btn-primary">Learn More</a>
              </div>
            </div>
          </div>
        </div>
        <div class="row card-row">
          <div class="col-sm-4">
            <div class="card text-center pt-3" >
              <div class="card-img">
                <img src="resources/bg.png" class="card-img-top img-fluid my-3" alt="..." >
              </div>
              <div class="card-body">
                <h5 class="card-title">lorem ipsum</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, 
                    consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua.</p>
                <a href="#" class="btn btn-primary">Learn More</a>
              </div>
            </div>
          </div>
      
          <div class="col-sm-4 ">
            <div class="card text-center pt-3">
              <div class="card-img">
                <img src="resources/bg.png" class="card-img-top img-fluid my-3" alt="..." >
              </div>
              <div class="card-body">
                <h5 class="card-title">lorem ipsum</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, 
                    consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua.</p>
                <a href="#" class="btn btn-primary">Learn More</a>
              </div>
            </div>
          </div>
      
          <div class="col-sm-4">
            <div class="card text-center pt-3">
              <div class="card-img">
                <img src="resources/bg.png" class="card-img-top img-fluid my-3" alt="..." >
              </div>
              <div class="card-body">
                <h5 class="card-title">lorem ipsum</h5>
                <p class="card-text">Lorem ipsum dolor sit amet, 
                    consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua.</p>
                <a href="#" class="btn btn-primary">Learn More</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      </section>
    
      <div class="content justify-content-center">
        <div class="wholeBus">
          <!--bus seat structure -->
          <div class="leftSide sides">
            <div class="seatRaw">
              <div class="seat" id="s1"></div>
              <div class="seat" id="s2"></div>
            </div>
            <div class="seatRaw">
              <div class="seat" id="s5"></div>
              <div class="seat" id="s6"></div>
            </div>
            <div class="seatRaw">
              <div class="seat" id="s9"></div>
              <div class="seat" id="s10"></div>
            </div>
            <div class="seatRaw">
              <div class="seat" id="s13"></div>
              <div class="seat" id="s14"></div>
            </div>
          </div>
  
          <div class="rightSide sides">
            <div class="seatRaw">
              <div class="seat" id="s3"></div>
              <div class="seat" id="s4"></div>
            </div>
            <div class="seatRaw">
              <div class="seat" id="s7"></div>
              <div class="seat" id="s8"></div>
            </div>
            <div class="seatRaw">
              <div class="seat" id="s11"></div>
              <div class="seat" id="s12"></div>
            </div>
            <div class="seatRaw">
              <div class="seat" id="s15"></div>
              <div class="seat" id="s16"></div>
            </div>
          </div>
        </div>
        <div class="text">
          <!-- text area -->
          <h1>Select Your Seat</h1>
          <h3 id="selectedSeats">Seat number :</h3>
          <h3 id="numberOfSeats">Total :</h3>
          <h3 id="totalCost">total</h3>
        </div>
      </div>

      <section id="footer">
        <div class="container">
          <footer class="py-5 my-4 end-footer">
            <ul class="nav justify-content-center pb-3 mb-3 borders" >
              <li class="nav-item foot-items"><a href="index.html" class="nav-link foot-link text-center"><i class="fa-solid footer-icon  fa-house"></i>Home</a></li>
              <li class="nav-item foot-items"><a href="login.html" class="nav-link foot-link text-center"><i class="fa-solid footer-icon  fa-viruses"></i>Log In</a></li>
              <li class="nav-item foot-items"><a href="destinations.html" class="nav-link foot-link text-center"><i class="fa-solid footer-icon  fa-money-check-dollar"></i>Destinations</a></li>
              <li class="nav-item foot-items"><a href="contactUs.html" class="nav-link foot-link text-center"><i class="fa-solid footer-icon  fa-circle-info"></i>Contact Us</a></li>
            </ul>
            <p class="text-center copyrights">
              Copyright 2023 BookYourExpress. All rights reserved 
              <i class="fa-regular fa-copyright"></i>  <br> BookYourExpress.lk is not responsible for any schedule changes, delays, or cancellations due to unforeseen circumstances.   
            </p>
          </footer>
        </div>
      </section>


</body>
</html>